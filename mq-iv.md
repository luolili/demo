# rmq
1. rmq有 哪几种广播类型
- fanout : 所有 绑定到 此 exchange 的 queue 都可以接受消息
- direct: 通过 routingKey 和 exchange 决定 唯一的 queue 可以接受消息
- topic: 所有符合 routingKey的 都可以接受消息

2.rmq 如何保证消息的稳定性？
> 消费者 在消费完消息之后， 会发送一个回执 给mq, mq收到回执后才把消息从 queue 里面移除，
如果mq 没有收到回执，并发现 消费者 的mq 链接断开了，mq会把消息发给其他消费者。

3.rmq 持久化的缺点？
- 如果 消息是自动确认的话，那么在消息被接受之后，mq就会删除这个消息，如果 消费端此时宕机，
那么消息就丢失了，需要把消息 设置为 手动确认
- 手动确认：在消息确认 过程中 出现问题，在消费端重启之后，消息会被重新消费
- 消息发送到mq之后，在mq 回复 已成功接收消息 的过程中 出现异常，那么发送端会多次发送该消息
- 消息 写入 磁盘 也会出问题

4.rmq 怎么实现延迟消息队列？
- 给消息设置过期时间：ttl

5.rmq是怎么发送消息的？
- rmq相当于 一个邮箱，是一个消息的队列；
- 生产者：发送消息的 人
- Connection:通过 TCP 连接到 rmq server
- channel:发送，接受消息：他可以指定要发送/发送消息的queue

6.rmq 的每个节点都是 其他节点的完整拷贝吗？
- 不是，队列的完整信息，只放在一个节点里面，其他节点放该队列的地址


---
#activemq
1.amq :工作模式？
- 点对点模式：一个消息 只有一个消费者 消费
- 发布/订阅：消费者 只有消费 他 订阅的主题  
##取消订单用 mq

## mq处理减少库存失败怎么办




