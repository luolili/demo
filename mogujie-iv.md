1. 对于分布式的系统，上游系统调用你的系统调用你的系统，出现超市，怎么处理？

- 监控平台： 请求超时会抛出异常，会触发企业微信邮件警告；
- 开发人员看对应的日志里面的异常信息，找到出问题的接口，
这个接口是否调用了外部系统，定位问题是外部的还是内部的。

2. 核心线程池被打满了的原因？
- 接口里面存在耗时的操作，导致后面的接口的调用受到影响
- 处理方法： 服务降级，限流。

3. 你的服务每隔半个小时出现服务不可用的情况，怎么排查？
- 原因： 定时任务同步一些数据到其他的系统，由于网络的问题，那边的服务很慢，导致超时。
- 内存泄漏导致频繁的full gc, gc 很多。

4.数据库的多索引匹配？
- ABC3个组合索引，必须顺序执行。 索引的最左匹配原则

5. 数据库的单热点问题怎么解决？
- 先做缓存，然后用mq 削水峰填谷

6. 操作缓存可能会超时，怎么保证数据的一致性？
- 多个数据库的集群，把流量分散到各个主从集群数据库的主库上
- 把热点数据多搞几个，均摊一下访问：分而治之。

---
happens-before

1.单线程：每个线程有自己的内存区域

2. 线程安全的类：CountDownLatch,Semaphore,线程池

3. 锁操作：syn/lock

---
spring如何处理并发问题？
- 无状态的bean 用单例模式
- ThreadLocal: 空间换时间，为每个thread提供一个
独立的var copy,从而隔离了多个thread对同一个数据的
访问conflict,把不安全的var放入thread local.